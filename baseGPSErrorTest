/* 
 *  File        : baseGpsErrorTest.ino
 *  Description : A simple Test to determine base GPS Error
 *  Author      : Edgar Gomez 
 */
  


#include <TinyGPS++.h>

static const uint32_t GPSBaud = 9600;

double knownLat = 40.778548;
double knownLng = -83.956531;


// The TinyGPS++ object
TinyGPSPlus gps;


void setup()
{
  Serial.begin(115200);
  Serial1.begin(4800);
  //delay(1000);

  Serial.println("baseGpsErrorTest.ino");
  Serial.println("A simple Test to determine block 3 base GPS Error");
}

void loop()
{
  // This sketch displays information every time a new sentence is correctly encoded.
  while (Serial1.available() != 0)
    if (gps.encode(Serial1.read()))
      displayError();
}

void displayError()
{

    if(gps.satellites.isValid())
    Serial.print("Sattelites      : "); Serial.println(gps.satellites.value());
 
  if (gps.location.isValid())
  {
    Serial.print("GPS Latitude    : "); Serial.println(gps.location.lat(), 6);
    Serial.print("GPS Longitude   : "); Serial.println(gps.location.lng(), 6);
    Serial.print("Known Latitude  : "); Serial.println(knownLat, 6);
    Serial.print("Known Longitude : "); Serial.println(knownLng, 6);
    Serial.print("Latitude Error  : "); Serial.println(knownLat - gps.location.lat(), 6);
    Serial.print("Longitude Error : "); Serial.println(knownLng - gps.location.lat(), 6);
  }
  else
  {
    Serial.print(("INVALID"));
  }

  Serial.print((" "));
  
  Serial.println();
}
